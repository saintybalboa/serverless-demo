SHELL := /bin/bash
SLS_DEBUG=*

deploy:
	@echo "Creating email stack ..."
	ENV=$(ENV) \
	HOSTED_ZONE_ID=$(HOSTED_ZONE_ID) \
	EMAIL_SENDER_DOMAIN=$(EMAIL_SENDER_DOMAIN) \
	EMAIL_SENDER_ALIAS=$(EMAIL_SENDER_ALIAS) \
	FORWARD_EMAIL_ADDRESS=$(FORWARD_EMAIL_ADDRESS) \
	SNS_TOPIC_ARN=$(SNS_TOPIC_ARN) \
	sls deploy

remove:
	@echo "Removing email stack ..."
	ENV=$(ENV) \
	HOSTED_ZONE_ID=$(HOSTED_ZONE_ID) \
	EMAIL_SENDER_DOMAIN=$(EMAIL_SENDER_DOMAIN) \
	EMAIL_SENDER_ALIAS=$(EMAIL_SENDER_ALIAS) \
	FORWARD_EMAIL_ADDRESS=$(FORWARD_EMAIL_ADDRESS) \
	SNS_TOPIC_ARN=$(SNS_TOPIC_ARN) \
	sls remove
